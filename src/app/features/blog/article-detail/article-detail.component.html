<div class="article-container">

  @if (loading()) {
    <p class="loading-message">Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù‚Ø§Ù„...</p>
  } @else {

    @if (article(); as art) {

      <header class="article-header">
        <button (click)="goBack()" class="back-button">â† Ø§Ù„Ø¹ÙˆØ¯Ø©</button>
        <h1 class="article-title">{{ art.title }}</h1>
        <p class="article-meta">
          Ù†ÙØ´Ø± ÙÙŠ {{ art.published_at | date: 'fullDate' }}
          <span class="category-badge">{{ art.category }}</span>
        </p>
      </header>

      @if (art.cover_image_url) {
        <img alt=""
          class="cover-image"
          [src]="art.cover_image_url"
          [alt]="art.title">
      }

      <!-- ===== Ø§Ù„Ù…Ù‚Ø§Ù„Ø§Øª Ø§Ù„Ù…Ø±ØªØ¨Ø·Ø© Ø¨Ù…Ù„Ù ===== -->
      @if (art.is_link && art.article_link) {

        <div class="document-viewer-wrapper">

          <div class="iframe-controls">
            <a
              [href]="art.article_link"
              target="_blank"
              rel="noopener noreferrer"
              class="control-btn">
              ğŸ”— ÙØªØ­ ÙÙŠ Ù†Ø§ÙØ°Ø© Ø¬Ø¯ÙŠØ¯Ø©
            </a>
          </div>

          <!-- Google Docs (Word) -->
          @if (isGoogleDoc(art.article_link)) {
            <iframe
              class="document-iframe"
              [src]="art.article_link + '?embedded=true' | safeUrl"
              frameborder="0"
              title="{{ art.title }}">
            </iframe>
          }

          <!-- Google Drive PDF -->
        @else if (isGoogleDrive(art.article_link)) {
  @if (getDrivePreviewUrl(art.article_link); as previewUrl) {
    <iframe
      class="document-iframe"
      [src]="previewUrl | safeUrl"
      frameborder="0"
      title="{{ art.title }}">
    </iframe>
  }
}

          <!-- Ø£ÙŠ Ø±Ø§Ø¨Ø· Ø¢Ø®Ø± -->
          @else {
            <p class="unsupported-message">
              Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø¹Ø±Ø¶ Ù‡Ø°Ø§ Ø§Ù„Ù…Ù„Ù Ø¯Ø§Ø®Ù„ Ø§Ù„ØµÙØ­Ø©.
              <a [href]="art.article_link" target="_blank">Ø§Ø¶ØºØ· Ù‡Ù†Ø§ Ù„Ù„ÙØªØ­</a>
            </p>
          }

        </div>

      }

      <!-- ===== Ù…Ù‚Ø§Ù„ Ù†ØµÙŠ Ø¹Ø§Ø¯ÙŠ ===== -->
      @else {
        <article
          class="article-content"
          [innerHTML]="art.content | safeHtml">
        </article>
      }

    } @else {
      <p class="empty-message">
        Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø§Ù„Ù…Ù‚Ø§Ù„.
        <button (click)="goBack()" class="back-button">Ø§Ù„Ø¹ÙˆØ¯Ø©</button>
      </p>
    }

  }

</div>
